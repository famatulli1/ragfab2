# ============================================
# Ingestion Worker Configuration pour Coolify
# ============================================

# -------------------------------------------
# Database Configuration
# -------------------------------------------
# URL de connexion PostgreSQL (utiliser .internal sur Coolify)
DATABASE_URL=postgresql://raguser:CHANGE_ME@ragfab-postgres.internal:5432/ragdb

# -------------------------------------------
# Embeddings Service Configuration
# -------------------------------------------
# URL du service d'embeddings (utiliser .internal sur Coolify)
EMBEDDINGS_API_URL=http://ragfab-embeddings.internal:8001

# Dimension des vecteurs d'embeddings (doit correspondre au modèle)
EMBEDDING_DIMENSION=1024

# -------------------------------------------
# Chunking Configuration
# -------------------------------------------
# Taille des chunks en caractères
CHUNK_SIZE=1500

# Chevauchement entre les chunks
CHUNK_OVERLAP=200

# Utiliser le chunking sémantique (HybridChunker de Docling)
USE_SEMANTIC_CHUNKING=true

# -------------------------------------------
# Worker Configuration
# -------------------------------------------
# Intervalle de polling en secondes (temps entre chaque vérification de jobs)
WORKER_POLL_INTERVAL=3

# Timeout en minutes avant de considérer un job comme bloqué
WORKER_TIMEOUT_MINUTES=30

# Répertoire des fichiers uploadés (doit correspondre au volume partagé)
UPLOADS_DIR=/app/uploads

# -------------------------------------------
# Cache & Performance
# -------------------------------------------
# Cache Hugging Face pour les modèles ML
TRANSFORMERS_CACHE=/home/worker/.cache/huggingface

# Niveau de logging (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
